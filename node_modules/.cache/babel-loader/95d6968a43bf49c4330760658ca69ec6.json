{"ast":null,"code":"var _jsxFileName = \"/home/ben/Downloads/notes-auth-app/src/App.js\";\nimport './App.css';\nimport { GoogleLogin, GoogleLogout } from \"react-google-login\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nrequire(\"dotenv\").config();\n\nconsole.log(process.env.CLIENT_ID);\n\nconst refreshTokenSetup = res => {\n  let refreshTiming = (res.tokenObj.expires_in || 3600 - 5 * 60) * 1000;\n\n  const refreshToken = async () => {\n    const newAuthRes = await res.reloadAuthResponse();\n    refreshTiming = (newAuthRes.expires_in || 3600 - 5 * 60) * 1000;\n    console.log(\"newAuthRes:\", newAuthRes);\n    console.log(\"new auth token\", newAuthRes.id_token);\n  };\n\n  setTimeout(refreshToken, refreshTiming);\n};\n\nfunction Login() {\n  const handleLogin = async googleData => {\n    const res = await fetch(\"https://fauna-notes-api.herokuapp.com/auth/google\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        token: googleData.tokenId\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    const data = await res.json();\n    console.log(data);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(GoogleLogin, {\n      clientId: \"495491693403-2e5c08nmh8vpq5ckt5jgr39kn6515sis.apps.googleusercontent.com\",\n      buttonText: \"Login\",\n      onSuccess: handleLogin,\n      onFailure: handleLogin,\n      cookiePolicy: \"single_host_origin\",\n      style: {\n        marginTop: \"100px\"\n      },\n      isSignedIn: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n\n_c = Login;\n\nfunction Logout() {\n  const onSuccess = () => {\n    alert(\"Logout completed successfully.\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(GoogleLogout, {\n      clientId: process.env.CLIENT_ID,\n      buttonText: \"Logout\",\n      onLogoutSuccess: onSuccess\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n\n_c2 = Logout;\n\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n\n_c3 = App;\nexport default App;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Login\");\n$RefreshReg$(_c2, \"Logout\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"sources":["/home/ben/Downloads/notes-auth-app/src/App.js"],"names":["GoogleLogin","GoogleLogout","require","config","console","log","process","env","CLIENT_ID","refreshTokenSetup","res","refreshTiming","tokenObj","expires_in","refreshToken","newAuthRes","reloadAuthResponse","id_token","setTimeout","Login","handleLogin","googleData","fetch","method","body","JSON","stringify","token","tokenId","headers","data","json","marginTop","Logout","onSuccess","alert","App"],"mappings":";AAAA,OAAO,WAAP;AACA,SAASA,WAAT,EAAsBC,YAAtB,QAA0C,oBAA1C;;;AAEAC,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AAEAC,OAAO,CAACC,GAAR,CAAYC,OAAO,CAACC,GAAR,CAAYC,SAAxB;;AAEA,MAAMC,iBAAiB,GAAIC,GAAD,IAAS;AACjC,MAAIC,aAAa,GAAG,CAACD,GAAG,CAACE,QAAJ,CAAaC,UAAb,IAA2B,OAAO,IAAI,EAAvC,IAA6C,IAAjE;;AAEA,QAAMC,YAAY,GAAG,YAAY;AAC/B,UAAMC,UAAU,GAAG,MAAML,GAAG,CAACM,kBAAJ,EAAzB;AACAL,IAAAA,aAAa,GAAG,CAACI,UAAU,CAACF,UAAX,IAAyB,OAAO,IAAI,EAArC,IAA2C,IAA3D;AACAT,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BU,UAA3B;AAEAX,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BU,UAAU,CAACE,QAAzC;AACD,GAND;;AAQAC,EAAAA,UAAU,CAACJ,YAAD,EAAeH,aAAf,CAAV;AACD,CAZD;;AAcA,SAASQ,KAAT,GAAiB;AACf,QAAMC,WAAW,GAAG,MAAMC,UAAN,IAAoB;AACtC,UAAMX,GAAG,GAAG,MAAMY,KAAK,CAAC,mDAAD,EAAsD;AAC3EC,MAAAA,MAAM,EAAE,MADmE;AAE3EC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,QAAAA,KAAK,EAAEN,UAAU,CAACO;AADC,OAAf,CAFqE;AAK3EC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AALkE,KAAtD,CAAvB;AAUA,UAAMC,IAAI,GAAG,MAAMpB,GAAG,CAACqB,IAAJ,EAAnB;AACA3B,IAAAA,OAAO,CAACC,GAAR,CAAYyB,IAAZ;AACD,GAbD;;AAeA,sBACE;AAAA,2BACE,QAAC,WAAD;AACE,MAAA,QAAQ,EAAC,0EADX;AAEE,MAAA,UAAU,EAAC,OAFb;AAGE,MAAA,SAAS,EAAEV,WAHb;AAIE,MAAA,SAAS,EAAEA,WAJb;AAKE,MAAA,YAAY,EAAE,oBALhB;AAME,MAAA,KAAK,EAAE;AAAEY,QAAAA,SAAS,EAAE;AAAb,OANT;AAOE,MAAA,UAAU,EAAE;AAPd;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAaD;;KA7BQb,K;;AA+BT,SAASc,MAAT,GAAkB;AAChB,QAAMC,SAAS,GAAG,MAAM;AACtBC,IAAAA,KAAK,CAAC,gCAAD,CAAL;AACD,GAFD;;AAIA,sBACE;AAAA,2BACE,QAAC,YAAD;AACE,MAAA,QAAQ,EAAE7B,OAAO,CAACC,GAAR,CAAYC,SADxB;AAEE,MAAA,UAAU,EAAC,QAFb;AAGE,MAAA,eAAe,EAAE0B;AAHnB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AASD;;MAdQD,M;;AAgBT,SAASG,GAAT,GAAe;AACb,sBACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA,2BACE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAMD;;MAPQA,G;AAST,eAAeA,GAAf","sourcesContent":["import './App.css';\nimport { GoogleLogin, GoogleLogout } from \"react-google-login\";\n\nrequire(\"dotenv\").config();\n\nconsole.log(process.env.CLIENT_ID);\n\nconst refreshTokenSetup = (res) => {\n  let refreshTiming = (res.tokenObj.expires_in || 3600 - 5 * 60) * 1000;\n\n  const refreshToken = async () => {\n    const newAuthRes = await res.reloadAuthResponse();\n    refreshTiming = (newAuthRes.expires_in || 3600 - 5 * 60) * 1000;\n    console.log(\"newAuthRes:\", newAuthRes);\n\n    console.log(\"new auth token\", newAuthRes.id_token);\n  }\n\n  setTimeout(refreshToken, refreshTiming);\n}\n\nfunction Login() {\n  const handleLogin = async googleData => {\n    const res = await fetch(\"https://fauna-notes-api.herokuapp.com/auth/google\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        token: googleData.tokenId\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n\n    const data = await res.json()\n    console.log(data)\n  }\n\n  return (\n    <div>\n      <GoogleLogin\n        clientId=\"495491693403-2e5c08nmh8vpq5ckt5jgr39kn6515sis.apps.googleusercontent.com\"\n        buttonText=\"Login\"\n        onSuccess={handleLogin}\n        onFailure={handleLogin}\n        cookiePolicy={\"single_host_origin\"}\n        style={{ marginTop: \"100px\" }}\n        isSignedIn={true}\n      />\n    </div>\n  )\n}\n\nfunction Logout() {\n  const onSuccess = () => {\n    alert(\"Logout completed successfully.\")\n  }\n\n  return (\n    <div>\n      <GoogleLogout\n        clientId={process.env.CLIENT_ID}\n        buttonText=\"Logout\"\n        onLogoutSuccess={onSuccess}\n      />\n    </div>\n  )\n}\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Login />\n      {/* <Logout /> */}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}